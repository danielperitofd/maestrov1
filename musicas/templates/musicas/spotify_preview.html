{% extends "musicas/base.html" %}
{% block content %}
<h2>Pré-visualização das músicas</h2>

<form method="post" action="{% url 'musicas:confirm_spotify_import' %}">
    {% csrf_token %}
    <table>
        <tr>
            <th>Título</th>
            <th>Artista</th>
            <th>Link</th>
            <th>Categoria</th>
            <th>BPM</th>
            <th>Tom</th>
        </tr>
        {% for song in songs %}
        <tr>
            <td><input type="hidden" name="title_{{ forloop.counter }}" value="{{ song.title }}">{{ song.title }}</td>
            <td><input type="hidden" name="artist_{{ forloop.counter }}" value="{{ song.artist }}">{{ song.artist }}</td>
            <td><input type="hidden" name="links_{{ forloop.counter }}" value="{{ song.links }}"><a href="{{ song.links }}" target="_blank">Ouvir</a></td>
            <td>
                <select name="category_{{ forloop.counter }}">
                    {% for cat in categories %}
                        <option value="{{ cat.name }}" {% if cat.name == song.category %}selected{% endif %}>{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </td>
            <td><input type="number" name="bpm_{{ forloop.counter }}" value="{{ song.bpm }}" placeholder="BPM" style="width: 60px;"></td>
            <td><input type="text" name="key_{{ forloop.counter }}" value="{{ song.key }}" placeholder="Tom" style="width: 60px;"></td>
        </tr>
        {% endfor %}
    </table>
    <input type="hidden" name="total" value="{{ songs|length }}">
    <button type="submit" class="btn" style="margin-top: 20px;">Importar músicas</button>
</form>
{% endblock %}
